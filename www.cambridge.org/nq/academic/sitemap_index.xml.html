<html>
<head>

<script>
    window.dataLayer = window.dataLayer || [];
</script>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MXMG453');</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge"><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"5648947972",applicationID:"188665667"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script>
<title>Page Not Found</title>
<link rel="icon" type="image/ico" href="/nq/packages/cambridge_themes/themes/global_corporate/images/favicon.ico">
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="format-detection" content="telephone=no">
<title> | Cambridge University Press</title>
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1" />
<script type="text/javascript">
    var CCM_DISPATCHER_FILENAME = '';var CCM_CID = 0;var CCM_EDIT_MODE = false;var CCM_ARRANGE_MODE = false;
    var CCM_IMAGE_PATH        = "/nq/concrete/images";
    var CCM_TOOLS_PATH        = "/nq/tools/required";
    var CCM_BASE_URL          = "https://www.cambridge.org";
    var CCM_REL               = "/nq";
    var KK_MINI_CART          = "//www.cambridge.org/wm-ecommerce-web/ws/getItems";
    var VISTA_SERVICE_REGION  = "C";
    var IS_KK_ASIA            = "1";
    var IS_KK_AUS             = "1";
    var CURRENT_SITE          = "academic";
    var GTM_CURRENT_THEME     = "academic";
    var VYRE_BASKET           = "//www.cambridge.org/wm-ecommerce-web/academic/cart";
    var IS_KK_ACS_ENABLED     = "0";

    if (window.dataLayer !== undefined) {
        window.dataLayer.push({"stream": GTM_CURRENT_THEME});
    }
</script>
<script type="text/javascript">
    var CWS_ECOMMERCE_ENABLED = true;

            if (CWS_ECOMMERCE_ENABLED) {
                        var Locale = {
                countryCode: "DE",
                countryName: "Germany",
                currencyCode: "GBP",
                currencySymbol: "&pound;",
                region: "C"
            };
        }
    </script>
<link rel="stylesheet" href="/concrete/css/ccm.base.css" type="text/css" />
<script src="/concrete/js/jquery.js" type="text/javascript"></script>
<script src="/concrete/js/ccm.base.js" type="text/javascript"></script>
<link rel="shortcut icon" href="/files/7413/5946/5646/favicon.ico" type="image/x-icon" />
<link rel="icon" href="/files/7413/5946/5646/favicon.ico" type="image/x-icon" />
<meta property="og:type" content="website">
<meta property="og:site_name" content="Cambridge University Press">
<link rel="stylesheet" type="text/css" href="/blocks/content/style/view.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" />
<script type="text/javascript" src="/blocks/content/js_file/view.js?v=3746846b0e26ab9c8f781c9f66bd8a4a"></script>
<link rel="stylesheet" type="text/css" href="/packages/cambridge_themes/blocks/social_plugin/style/view.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" />
<link rel="stylesheet" type="text/css" href="/packages/cambridge_themes/blocks/custom_content/style/view.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" />
<script type="text/javascript" src="/packages/cambridge_themes/blocks/simple_promo/js/form.js?v=3746846b0e26ab9c8f781c9f66bd8a4a"></script>
<link rel="stylesheet" type="text/css" href="/concrete/blocks/next_previous/style/view.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" />
<link rel="stylesheet" type="text/css" href="/packages/cambridge_english/blocks/popular_links/css/form.min.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" />
<link rel="stylesheet" type="text/css" href="/packages/cws_ecommerce/css/mini-cart.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" />
<link rel="stylesheet" type="text/css" href="/packages/cambridge_themes/css/../stylesheets/foundation.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" /><link rel="stylesheet" type="text/css" href="/packages/cambridge_themes/css/../themes/global_corporate/stylesheets/global.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" /><link rel="stylesheet" type="text/css" href="/packages/bibles/css/global-nav.min.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" /><link rel="stylesheet" type="text/css" href="/packages/cambridge_themes/css/../stylesheets/corporate.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" /><link rel="stylesheet" type="text/css" href="/packages/cambridge_themes/css/404.min.css?v=3746846b0e26ab9c8f781c9f66bd8a4a" /></head>
<body class="lost">
<noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MXMG453" height="0" width="0" style="display:none;
        visibility:hidden"></iframe>
    </noscript>
<div id="content">
<div id="global-nav"><a href="#globalnav" class="open icon hide-text" id="ccpOpenPageSlide" style="display:none;">Open global navigation</a><div class="mobile-logo-wrapper"><a href="https://www.cambridge.org?utm_medium=logo" class="cuplogo icon hide-text ">Cambridge University Press</a></div><ul id="globalnav"><li><a tabindex="0" href="https://www.cambridge.org?utm_medium=logo" class="hide-text icon" data-tapp="lnk_gnbcambridgelogo">Cambridge University Press</a></li><li><a href="#" class="submenu icon" onclick="" aria-expanded="false">Academic</a><ul><li><a href="/core/?utm_medium=core" data-tapp="lnk_gnbcore">Cambridge Core <span> (Institutional access)</span></a></li><li><a href="https://www.cambridge.org/nq/academic?utm_medium=academic" data-tapp="lnk_gnbacademic">Books Catalogue <span>(Individuals)</span></a></li></ul></li><li><a href="https://www.cambridge.org/cambridgeenglish?site_locale=de_DE&amp;prefCountry=DE&utm_medium=cenglish" data-tapp="lnk_gnbcameng">Cambridge English</a></li><li><a href="https://www.cambridge.org/nq/education?utm_medium=education" data-tapp="lnk_gnbeducation">Education</a></li><li><a href="https://www.cambridge.org/bibles?site_locale=de_DE&amp;prefCountry=DE&utm_medium=bibles" data-tapp="lnk_gnbbibles">Bibles</a></li><li><a href="/digital-products?utm_medium=digiprod" data-tapp="lnk_gnbdigiprod">Digital Products</a></li><li><a href="/about-us?utm_medium=aboutus" class="submenu icon expanded" aria-expanded="false">About Us</a><ul><li><a href="/about-us/who-we-are/press-syndicate?utm_medium=gov" data-tapp="lnk_gnbagovernance">Governance</a></li><li class="tablet-only"><a href="/about-us/careers?utm_medium=careers">Careers</a></li><li><a href="/about-us/rights-permissions?utm_medium=rights" data-tapp="lnk_gnbrightspermissions">Rights &amp; Permissions</a></li><li><a href="/about-us/what-we-do/cambridge-conference-facilities?utm_medium=conf" data-tapp="lnk_gnbconfvenues">Conference Venues</a></li><li class="hide-for-mobile"><a href="/about-us/contact-us/?site=corporate&utm_medium=contactus" data-tapp="lnk_gnbcontactus">Contact Us</a></li></ul></li><li class="hide-for-mobile"><a href="/about-us/careers?utm_medium=careers" data-tapp="lnk_gnbcareers">Careers</a></li><li class="show-for-mobile"><a href="/about-us/contact-us/?site=corporate&utm_medium=contactus">Contact Us</a></li><li class="right"><ul><li class="navLocation "><a href="/nq/about-us/location" data-ajax-reveal-id="locationOptions" title="Germany" class="location icon toggle-select-country" data-tapp="lnk_gnblocale" modal-toggle="modal" modal-target="#country-selector-modal">Germany</a></li></ul></li></ul><ul class="mobile-icons"><li><a href="/nq/about-us/location" data-ajax-reveal-id="locationOptions" class="countryReveal icon hide-text toggle-select-country" modal-toggle="modal" modal-target="#country-selector-modal">Location selector</a></li><li><a href="/nq/about-us/location" data-ajax-reveal-id="locationOptions" class="countryReveal icon hide-text">Location selector</a><a href="#" class="search icon hide-text searchToggle">Search toggle</a></li><li><a href="#" class="menu icon hide-text mainNavToggle">Menu</a></li></ul></div>
<div class="mainWrap">
<h2>
Oops. You’re lost in Cambridge.
</h2>
<p>
The page <span class='bold'>/nq/academic/sitemap_index.xml</span> can’t be found. Visit
our <a class="link" href="/">homepage</a>, use the links above, or search below. </p>
<div class="input-group searchBox">
<a href="#search" class="icon-search hideText">Search</a>
<input placeholder="Search Cambridge.org" type="text" id="searchField">
<div class="modal"><a href="#" class="dismiss searchModal icon icon-close hideText">Close</a></div>
</div>
<div class="modalInfo">
<div class="window">
<p class="title">The Senate House car stunt</p>
<a href="#" class="icon-close icon hideText infoModal">Close</a>
<p>
On 8 June 1958, Peter Davey and 11 other students at Gonville &amp; Cauis college hoisted a derelict
Austin 7 van onto the roof of the Cambridge University Senate House, in the most ingenious of
student pranks.
</p>
<p>
Although the students had taken three hours under the cover of darkness to hoist the van onto the
roof, it took the Civil Defence force, helped by the Police and Fire Brigade four days to remove it!
</p>
<p>
The then Dean of Gonville &amp; Caius, the late Rev. Hugh Montefiore, having an inkling of who was
responsible sent a case of champagne to “O” Staircase (the halls of residence at Gonville &amp;
Caius where Peter Davey’s room was located).
</p>
</div>
</div>
<div class="modalSearch">
<a href="#" class="dismiss searchModal icon icon-close hideText">Close</a>
<div class="window">
<p class="title">Show results for</p>
<p>
<a class="cta link" href="/search?iFeelLucky=false&currentTheme=Academic_v1&query=">Academic Books and Research Journals</a>
</p>
<p>
<a class="cta link" href="/search?site=CE&currentTheme=Learning&iFeelLucky=false&query=">English Language Teaching</a>
</p>
<p>
<a class="cta link" href="/search?site=ED&currentTheme=Education&iFeelLucky=false&query=">Education Resources for Schools</a>
</p>
</div>
</div>
<div class="push"></div>
</div>
<div class="bottom">
<p class="credits">
Image: by kind permission of Ivy Leswekjfe FRS and Gonville &amp; Caius College
</p>
<a href="#" class="icon-info hideText">Information</a>
</div>
<script type="text/javascript" src="/packages/cambridge_themes/js/404.min.js?v=3746846b0e26ab9c8f781c9f66bd8a4a"></script> <meta name="google-site-verification" content="zaZApwnrrBwe94fhywE6bxDz_b2Np4e9XTMDV-6YqcU" />
<script type="text/javascript">
    $(function () {
        if (window.location.href.indexOf('/academic/subjects') >= 0) {
            $.each($('.relatedItemsWrap .relatedItem a[href^="//journals.cambridge.org"]'), function () { 
                $(this).attr('href', 'http://' + this.href.substring(this.href.indexOf('journals')));
            });
        }
    });
</script>
<script type="text/javascript">
    var eduUrlPattern = new RegExp('^\/[a-z]{2}\/education');

    if (!CWS_ECOMMERCE_ENABLED
        && !eduUrlPattern.test(window.location.pathname)
        && $('.addToCartBtn').length > 0) {

        $(function () {
            $('.addToCartBtn').removeClass('addToCartBtn').addClass('addToCartBtnPatch');

            if ((VISTA_SERVICE_REGION === 'A' && IS_KK_AUS === '0') || (VISTA_SERVICE_REGION === 'E' && IS_KK_ASIA === '0')) {
                if (IS_KK_ACS_ENABLED > 0) {
                    getVyreServicePatch();
                }
            } else {
                getKonakartServicePatch();
            }

            function getKonakartServicePatch() {
                jQuery('.addToCartBtnPatch').live('click', addToCartEventPatch);

                // send request to cart WS
                jQuery.ajax({
                    url: KK_MINI_CART,
                    dataType: 'xml',
                    success: mini_cart_successful_patch,
                    error: function () {
                        jQuery('#miniCartDetail .qty').show();
                        jQuery('#cartQty').html('(' + jQuery('#qtyValue').html() + ')');
                    },
                    // https://jira.cambridge.org/browse/KEP-453
                    cache: false
                });
            }

            function getVyreServicePatch() {
                // GAW-2570
                if (jQuery('.addToCartBtnPatch.konakartLink').length > 0) {
                    jQuery('.addToCartBtnPatch.konakartLink').live('click', addToCartEventPatch);
                }

                $.ajax({
                    url: "/tools/packages/cambridge_themes/miniCart",
                    data: {
                        source: "Academic_v1"
                    },
                    success: function (data) {
                        if ($('#qtyValue').html() == 0) {
                            jQuery('#cartQty').html('');
                            var cartOpt = {
                                url: KK_MINI_CART,
                                dataType: 'xml',
                                success: mini_cart_successful_patch,
                                error: function () {
                                    jQuery('#miniCartDetail .qty').show();
                                    jQuery('#cartQty').html('(' + jQuery('#qtyValue').html() + ')');
                                },
                                // https://jira.cambridge.org/browse/KEP-453
                                cache: false
                            };

                            // send request to cart WS
                            jQuery.ajax(cartOpt);
                            jQuery("a.viewCart").attr("href", VYRE_BASKET);
                            jQuery("a.academicCheckout").attr("href", VYRE_BASKET);

                            var minicartDetail = '<p class="qty">You have <span id="qtyString"><span id="qtyValue">0</span> items</span> in your cart.</p>' +
                                '<div id="miniCartItems"></div>' +
                                '<div class="withItems" style="display:none;">' +
                                '<div id="subtotal"><h4>Subtotal: <span id="subtotalValue">0.0</span></h4></div>' +
                                '<div class="clearfix"></div>' +
                                '<div id="buttons">' +
                                '<a href="' + VYRE_BASKET + '" class="button blue large viewCart">View cart <span class="viewCartCountAcademic_v1" style="display:none;">(0)</span></a>' +
                                '<a href="' + VYRE_BASKET + '" class="button orange large checkout academicCheckout">Checkout</a>' +
                                '</div>' +
                                '</div>';

                            $("#miniCartDetail").html(minicartDetail);
                        } else {
                            hasAsp = true;
                        }
                    }
                });
            }
        });

        var errorCallBackPatch = function () {
            // hide the view cart
            if (cartItemCount < 1) {
                jQuery('.viewCart').hide();
            }

            jQuery('#itemAddedMessage').text("There was a problem getting your cart information.");
            jQuery('#itemAddedModal').reveal();
        };

        var completeCallBackPatch = function () {
            alreadyClicked = false;
            countryChange = true;
            jQuery('body').css('cursor', 'auto');
        };

        var addToCartEventPatch = function (event) {
            event.preventDefault();

            // check first if the user hasn't clicked on the link to prevent multiple
            // AJAX requests
            if (alreadyClicked == false) {
                alreadyClicked = true;

                // make the body to show wait cursor while processing
                jQuery('body').css('cursor', 'wait');
                addToCartPatch(jQuery(this).data());
            }
        };

        /**
         * upon success of calling add to cart WS
         * @param data xml returned data from ecom
         * @param textStatus test status
         * @param isbn string added isbn
         */
        var add_to_cart_successful_patch = function (data, textStatus, isbn) {
            var $cartData = jQuery(data);
            // hack to get HTML content in XML
            var cartErrorMessage = $cartData.find('errorMessage').text().trim();
            var cartInfoMessage = $cartData.find('infoMessage').text().trim();

            // get cart lines in the cart WS
            var cartLines = processCartDataPatch(data);
            refresh_cart_patch(cartLines);

            // check first if we have error message then display it instead of item added message
            if (cartErrorMessage !== '') {
                jQuery('#addToCartCustom h4').html(cartErrorMessage);
                jQuery('#addToCartCustom h4').css('text-transform', 'none');
                jQuery('#addToCartCustom').reveal();
            } else if (cartInfoMessage !== '') {
                jQuery('#addToCartCustom h4').html(cartInfoMessage);
                jQuery('#addToCartCustom h4').css('text-transform', 'none');
                jQuery('#addToCartCustom').reveal();
            } else {
                // hide the view cart
                if (cartItemCount < 1) {
                    jQuery('.viewCart').hide();
                }

                jQuery('#itemAddedMessage').text("Item added to your cart!");
                jQuery('#itemAddedModal').reveal();
                googleTagManagerPatch(isbn);
            }
        };

        // upon success of calling cart WS
        var mini_cart_successful_patch = function (data, textStatus) {
            // get cart lines in the cart WS
            var cartLines = processCartDataPatch(data);
            refresh_cart_patch(cartLines);
        };

        /**
         * Convert data collected from the cart WS and traverse and store it in array
         * @param  {XML} xml Expected XML cart data
         * @return {Array}     Array list of lines (products) in the cart
         */
        var processCartDataPatch = function (xml) {
            // reset
            cartItemCount = 0;
            currency = '$';
            subTotal = 0;

            var $cartData = jQuery(xml);
            var cartLines = [];

            currency = $cartData.find('symbol').text();
            subTotal = $cartData.find('totalValueOverride').text();

            // traverse the orderline
            $cartData.find('orderLines').find('orderLine').each(function () {
                var data = [];
                data['availabilityLegend'] = getXMLValuePatch("availabilityLegend", this);

                cartItemCount += getXMLValuePatch('quantity', this) ? parseInt(getXMLValuePatch('quantity', this)) : 1;
                data['title'] = getXMLValuePatch('title', this);
                data['author'] = getXMLValuePatch('author', this);
                var price = getXMLValuePatch('publishedPriceOverride', this);
                data['price'] = price.length > 0 ? price : getXMLValuePatch('originalValue', this);
                data['price'] = data['price'].replace(',', '');

                data['discountPrice'] = getXMLValuePatch('publishedPriceOverride', this);
                data['discountPrice'] = data['discountPrice'].replace(',', '');
                data['ean'] = getXMLValuePatch('ean', this);
                data['quantity'] = getXMLValuePatch('quantity', this).replace(',', '');
                data['format'] = getXMLValuePatch('format', this);

                var volumeNumber = getXMLValuePatch('volumeNumber', this);
                data['volume'] = volumeNumber.length > 0 && volumeNumber != '0' ? 'Volume ' + volumeNumber : '';

                var partNumber = getXMLValuePatch('partNumber', this);
                data['part'] = partNumber.length > 0 && partNumber != '0' ? 'Part ' + partNumber : '';

                var edition = getXMLValuePatch('edition', this);
                data['edition'] = edition.length > 0 ? edition + ' Edition' : '';

                var lastModified = new Date(getXMLValuePatch('lastModified', this));
                data['lastModified'] = lastModified.getTime();

                cartLines.push(data);
            });

            cartLines.sort(function (a, b) {
                return a['lastModified'] - b['lastModified'];
            });

            return cartLines;
        };

        var getXMLValuePatch = function (key, container) {
            return jQuery(container).find(key).text();
        };

        var refresh_cart_patch = function (cartLines) {
            if (cartLines.length > 0) {
                var $miniCartDetail = jQuery('#miniCartDetail');
                var $learningQty = jQuery('p.qty #qtyString', $miniCartDetail);
                var $miniCartItems = jQuery('#miniCartItems');
                var $subTotal = jQuery('#subtotalValue');

                var cartItemString = '<span id="qtyValue">' + cartItemCount + '</span>' +
                    (cartItemCount == 0 || cartItemCount > 1 ? ' items' : ' item');

                $learningQty.html(cartItemString);

                var cartItems = '';

                var itemDisplayCount = 1;
                for (var i = 0; i < cartLines.length; i++) {
                    cartItems += '<h4><a href="/' + cartLines[i]['ean'] + '">' + cartLines[i]['title'] + '</a></h4>';
                    cartItems += '<p>' + cartLines[i]['volume'] + ' ' + cartLines[i]['part'] + ' ' + cartLines[i]['edition'] + '<span>' + ' ' + cartLines[i]['author'] + '</span></p>';
                    cartItems += '<p>' + cartLines[i]['format'] + '</p>';
                    cartItems += '<p>' + cartLines[i]['availabilityLegend'] + ' | Qty: ' + cartLines[i]['quantity'] + ' | Price: ' + currency + (parseFloat(cartLines[i]['quantity']) * parseFloat(cartLines[i]['price'])).toFixed(2) + '</p>';
                    itemDisplayCount++;

                    if (itemDisplayCount > 3 && CURRENT_SITE === 'cambridgeenglish') {
                        break;
                    }
                }

                $miniCartItems.html(cartItems);
                $subTotal.html(currency + subTotal);
                jQuery('#mobileCartQty').html('(' + jQuery('#qtyValue').html() + ')');

                jQuery('.withItems').show();
            }
            else {
                if (jQuery('#miniCartItems > h4').length == 0) {
                    jQuery('.withItems').hide();
                }
                jQuery('#miniCartDetail .qty').show();
            }

            jQuery('#cartQty').html('(' + jQuery('#qtyValue').html() + ')');
        };

        var addToCartPatch = function (data) {
            var params = {
                isbn: isbn = typeof data.isbn !== 'undefined' ? data.isbn : '',
                locale: typeof data.country !== 'undefined' ? data.country : '',
                page: typeof data.page !== 'undefined' ? data.page : '',
                discountCode: typeof data.discountcode !== 'undefined' ? data.discountcode : ''
            };

            if (params.page === "schools") {
                params['institutiononly'] = typeof data.institutiononly !== 'undefined' ? data.institutiononly : 0;
                params['qty'] = typeof data.qty !== 'undefined' ? data.qty : '';
            }

            var urlTarget = location.protocol + "//" + location.host
                          + "/wm-ecommerce-web/" + params.page + "/addtocart?" + $.param(params);

            jQuery.ajax({
                url: urlTarget,
                dataType: 'xml',
                success: function (data, textStatus) {
                    add_to_cart_successful_patch(data, textStatus, isbn)
                },
                error: errorCallBackPatch,
                complete: completeCallBackPatch,
                cache: false
            });
        };

        /**
         * firing google tag manager after adding to cart
         * the try catch block will take care of the logic for firing GTM if applicable, which is for ELT ATM.
         * @param isbn string
         */
        function googleTagManagerPatch(isbn) {
            try {
               var gtm = new GoogleTagManager();

               if ($.isFunction(gtm.addToCart)) {
                   $.post(
                       '/tools/packages/cambridge_core/titleService',
                       {"isbn": isbn, "data": "gtm_data"},
                       function (data, status) {
                           gtm.addToCart(data);
                       }
                   );
               }
            } catch (err) {
                // Google Tag Manager is not loaded.
                return;
            }
        }
    }
</script>
<script type="text/javascript">
    $(window).on("load", function() {
        $("a[href*='/elt/blog'], a[href*='/core']").each(function() {
            var href = $(this).attr("href");

            var urlSlug = href.split('/');

            if (urlSlug[3] && urlSlug[3].length === 2) {
                urlSlug.splice(0, 4);
                href = '/' + urlSlug.join('/');
            }

            var startsWithEltBlog = new RegExp("^\/elt\/blog");
            if (startsWithEltBlog.test(href)) {
                href = CCM_BASE_URL + href;
                href = href.replace('https://', 'http://');
            }

            $(this).attr("href", href);
        });

        if (CCM_BASE_URL.includes('//admin')) {
            $("#global-nav a[href*='cambridge.org']").each(function() {
                var href = $(this).attr("href");

                href = href.replace('https://', 'http://');
                href = href.replace('//www.', '//admin.');

                $(this).attr("href", href);
            });
        }
    });

if (window.location.pathname === '/checkout/vista_confirm') {
    $(".container .row.cart-info").prepend('<div class="col-12"><div class="alert alert-info" role="alert"><div class="alert-icon"><span class="svg-icon info"></span></div><div class="alert-message"><p>Please note, your transactions may incur a foreign transaction fee, not included in the final price listed but will appear on your credit card statement. This charge is made by your credit card provider, not by Cambridge University Press.</p></div></div></div>');
}
</script><script type="text/javascript" src="/packages/cws_ecommerce/js/bluebird.min.js?v=3746846b0e26ab9c8f781c9f66bd8a4a"></script>
<script type="text/javascript" src="/packages/cws_ecommerce/js/updateHtmlLinks.js?v=3746846b0e26ab9c8f781c9f66bd8a4a"></script>
<div id="cookieNotice">
<div class="wrap">
<span class="message">This site uses cookies to improve your experience.</span>
<a href="/about-us/legal-notices/cookies-policy" class="cta link">Read more</a>
<a href="#" class="dismiss cambridge-icon hideText">Close</a>
</div>
</div>
<script type="text/javascript">
        $('.close').click(function() {
            $('.disclosure-container').slideUp();
            $('#content').css("padding-top","0");
                    });
                $('#cookieNotice').remove();
        $('#content').css("padding-top","0");
            </script>
</div>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"5648947972","applicationID":"188665667","transactionName":"bl0DMBQAWhEDBkQMWVcXNBYPTl0MBgBIS0ZRSA==","queueTime":0,"applicationTime":18495,"atts":"QhoARlwaSR8=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>